# CLI Init — Quick Setup

Set up React Native MCP in your project with a single command.

```bash
npx -y @ohah/react-native-mcp-server init
```

This replaces all manual steps (babel config, client config, gitignore) with one interactive wizard.

---

## How it works

<div className="terminal">
  <div className="terminal-header">
    <span className="terminal-dot red" />
    <span className="terminal-dot yellow" />
    <span className="terminal-dot green" />
    <span className="terminal-title">Terminal</span>
  </div>
  <div className="terminal-body">
    <div className="terminal-line input">$ npx -y @ohah/react-native-mcp-server init</div>
    <br />
    <div className="terminal-line bold"> React Native MCP Setup</div>
    <br />
    <div className="terminal-line"> Detecting project...</div>
    <div className="terminal-line success"> ✓ React Native 0.83.1</div>
    <div className="terminal-line success"> ✓ Expo detected (expo@~52.0.0)</div>
    <div className="terminal-line success"> ✓ Package manager: bun</div>
    <br />
    <div className="terminal-line">? Which MCP client do you use?</div>
    <div className="terminal-line dim"> 1. Cursor</div>
    <div className="terminal-line dim"> 2. Claude Code (CLI)</div>
    <div className="terminal-line dim"> 3. Claude Desktop</div>
    <div className="terminal-line dim"> 4. Windsurf</div>
    <div className="terminal-line dim"> 5. Antigravity</div>
    <div className="terminal-line input">&gt; 1</div>
    <br />
    <div className="terminal-line"> Applying changes...</div>
    <div className="terminal-line success"> ✓ babel.config.js — preset added</div>
    <div className="terminal-line success"> ✓ MCP config — created .cursor/mcp.json</div>
    <div className="terminal-line success"> ✓ .gitignore — updated</div>
    <br />
    <div className="terminal-line success"> Done! Next steps:</div>
    <div className="terminal-line"> 1. Start your app: npx expo start</div>
    <div className="terminal-line"> 2. Open Cursor — MCP tools are ready to use</div>
  </div>
</div>

<style>{`
  .terminal {
    border-radius: 8px;
    overflow: hidden;
    margin: 1.5rem 0;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.25);
    font-family: 'SF Mono', 'Cascadia Code', 'Fira Code', 'JetBrains Mono', Menlo, monospace;
    font-size: 13px;
    line-height: 1.6;
  }
  .terminal-header {
    background: #3c3c3c;
    padding: 10px 14px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .terminal-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    display: inline-block;
  }
  .terminal-dot.red { background: #ff5f57; }
  .terminal-dot.yellow { background: #febc2e; }
  .terminal-dot.green { background: #28c840; }
  .terminal-title {
    flex: 1;
    text-align: center;
    color: #999;
    font-size: 12px;
    margin-right: 52px;
  }
  .terminal-body {
    background: #1e1e1e;
    padding: 16px 20px;
    color: #d4d4d4;
  }
  .terminal-line {
    white-space: pre;
  }
  .terminal-line.input {
    color: #f1f1f1;
  }
  .terminal-line.bold {
    color: #f1f1f1;
    font-weight: bold;
  }
  .terminal-line.success {
    color: #4ec9b0;
  }
  .terminal-line.warn {
    color: #d7ba7d;
  }
  .terminal-line.dim {
    color: #808080;
  }
`}</style>

---

## Steps in detail

### Step 1 — Project Detection

The init command reads your project directory and automatically detects:

| What                 | How                                                                     |
| -------------------- | ----------------------------------------------------------------------- |
| React Native version | `dependencies["react-native"]` in `package.json`                        |
| Expo                 | `dependencies["expo"]`, or `app.json` / `app.config.ts` exists          |
| Babel config         | `babel.config.js`, `babel.config.cjs`, `.babelrc`                       |
| Package manager      | `bun.lock` → bun, `yarn.lock` → yarn, `pnpm-lock.yaml` → pnpm, else npm |

If `react-native` is not found in `package.json`, the command exits with an error.

### Step 2 — MCP Client Selection

You are prompted to choose your MCP client. This determines where the config file is created.

| Client            | Config path                                                               |
| ----------------- | ------------------------------------------------------------------------- |
| Cursor            | `{project}/.cursor/mcp.json`                                              |
| Claude Code (CLI) | Runs `claude mcp add` command                                             |
| Claude Desktop    | `~/Library/Application Support/Claude/claude_desktop_config.json` (macOS) |
| Windsurf          | `~/.codeium/windsurf/mcp_config.json`                                     |
| Antigravity       | `~/.gemini/antigravity/mcp_config.json`                                   |

The generated config contains:

```json
{
  "mcpServers": {
    "react-native-mcp": {
      "command": "npx",
      "args": ["-y", "@ohah/react-native-mcp-server"]
    }
  }
}
```

If the file already exists, the `react-native-mcp` entry is merged in — existing settings are preserved.

### Step 3 — Apply Changes

Three files are modified:

1. **babel.config.js** — Appends `@ohah/react-native-mcp-server/babel-preset` to the `presets` array.
2. **MCP client config** — Created or merged as described above.
3. **.gitignore** — Appends `/results/` (used by E2E test outputs).

Each step is **idempotent**: running `init` again skips already-applied changes.

### Step 4 — Next Steps

Based on your project type, the command shows what to do next:

- **Expo**: `npx expo start`
- **Bare RN**: `REACT_NATIVE_MCP_ENABLED=true npx react-native start`

---

## Options

| Flag              | Description                            | Example           |
| ----------------- | -------------------------------------- | ----------------- |
| `--client <name>` | Skip client prompt                     | `--client cursor` |
| `-y`, `--yes`     | Non-interactive mode (default: Cursor) | `-y`              |
| `-h`, `--help`    | Show help                              | `--help`          |

```bash
# CI / automation
npx -y @ohah/react-native-mcp-server init --client cursor -y

# Specific client, still interactive for confirmations
npx -y @ohah/react-native-mcp-server init --client antigravity
```

## Idempotent

Running `init` multiple times is safe:

<div className="terminal">
  <div className="terminal-header">
    <span className="terminal-dot red" />
    <span className="terminal-dot yellow" />
    <span className="terminal-dot green" />
    <span className="terminal-title">Terminal — second run</span>
  </div>
  <div className="terminal-body">
    <div className="terminal-line input">
      $ npx -y @ohah/react-native-mcp-server init --client cursor -y
    </div>
    <br />
    <div className="terminal-line"> Applying changes...</div>
    <div className="terminal-line success"> ✓ babel.config.js — preset already configured</div>
    <div className="terminal-line success"> ✓ MCP config — already configured</div>
    <div className="terminal-line success"> ✓ .gitignore — already has results/</div>
  </div>
</div>
