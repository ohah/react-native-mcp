# 운영·관찰 (Observability)

MCP 서버 상태 확인과 장애 시 점검에 쓸 수 있는 수단.

---

## Health check

서버 프로세스가 떠 있는 동안 **HTTP health 서버**가 별도 포트에서 동작한다.

- **기본 포트**: 12301 (WebSocket 12300과 별도)
- **환경 변수**: `REACT_NATIVE_MCP_HEALTH_PORT`로 포트 변경. `0`이면 health 서버 비활성화.

### 엔드포인트

| 경로                                 | 설명           | 응답 예시                                                              |
| ------------------------------------ | -------------- | ---------------------------------------------------------------------- |
| `GET http://127.0.0.1:12301/health`  | 서버·연결 상태 | `{ "ok": true, "wsPort": 12300, "hasServer": true, "deviceCount": 1 }` |
| `GET http://127.0.0.1:12301/metrics` | 단순 메트릭    | `{ "deviceCount": 1, "connected": true }`                              |

로드밸런서·컨테이너 오케스트레이션에서 liveness/readiness 프로브로 `/health`를 사용할 수 있다.

---

## 메트릭

- **deviceCount**: 현재 연결된 앱(디바이스) 수.
- **connected**: 1대 이상 연결 여부.

추가 메트릭(요청 수, 지연 등)은 필요 시 별도 로드맵에서 다룬다.

---

## 로깅

서버는 stderr에 짧은 로그만 출력한다. 구조화 로그(JSON 등)나 로그 레벨 설정은 현재 제공하지 않는다.
